{"ast":null,"code":"var _jsxFileName = \"/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/engine.tsx\";\nimport * as ReactDOM from 'react-dom/client';\nimport { Main } from './main';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ReactEngine {\n  constructor(factory) {\n    this.factory = void 0;\n    this.locale = void 0;\n    this.root = void 0;\n    this.factory = factory;\n  }\n\n  start(rootElement, locale) {\n    console.log('[ReactEngine] started');\n    this.root = ReactDOM.createRoot(rootElement);\n    this.locale = locale;\n  }\n\n  async render(command) {\n    return await new Promise(resolve => {\n      this.renderPage(command.page).then(payload => {\n        resolve({\n          __type__: 'Response',\n          command,\n          payload\n        });\n      }, () => {});\n    });\n  }\n\n  async renderPage(props) {\n    return await new Promise(resolve => {\n      const context = {\n        locale: this.locale,\n        resolve\n      };\n      const page = this.factory.createPage(props, context);\n      this.renderElements([page]);\n    });\n  }\n\n  terminate() {}\n\n  renderElements(elements) {\n    this.root.render( /*#__PURE__*/_jsxDEV(Main, {\n      elements: elements\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 22\n    }, this));\n  }\n\n}","map":{"version":3,"names":["ReactDOM","Main","ReactEngine","constructor","factory","locale","root","start","rootElement","console","log","createRoot","render","command","Promise","resolve","renderPage","page","then","payload","__type__","props","context","createPage","renderElements","terminate","elements"],"sources":["/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/engine.tsx"],"sourcesContent":["import * as ReactDOM from 'react-dom/client'\nimport { VisualisationEngine } from '../../types/modules'\nimport { Response, Payload, CommandUIRender } from '../../types/commands'\nimport { PropsUIPage } from '../../types/pages'\nimport VisualisationFactory from './factory'\nimport { Main } from './main'\n\nexport default class ReactEngine implements VisualisationEngine {\n  factory: VisualisationFactory\n\n  locale!: string\n  root!: ReactDOM.Root\n\n  constructor (factory: VisualisationFactory) {\n    this.factory = factory\n  }\n\n  start (rootElement: HTMLElement, locale: string): void {\n    console.log('[ReactEngine] started')\n    this.root = ReactDOM.createRoot(rootElement)\n    this.locale = locale\n  }\n\n  async render (command: CommandUIRender): Promise<Response> {\n    return await new Promise<Response>((resolve) => {\n      this.renderPage(command.page).then(\n        (payload: Payload) => {\n          resolve({ __type__: 'Response', command, payload })\n        },\n        () => {}\n      )\n    })\n  }\n\n  async renderPage (props: PropsUIPage): Promise<any> {\n    return await new Promise<any>((resolve) => {\n      const context = { locale: this.locale, resolve }\n      const page = this.factory.createPage(props, context)\n      this.renderElements([page])\n    })\n  }\n\n  terminate (): void {}\n\n  renderElements (elements: JSX.Element[]): void {\n    this.root.render(<Main elements={elements} />)\n  }\n}\n"],"mappings":";AAAA,OAAO,KAAKA,QAAZ,MAA0B,kBAA1B;AAKA,SAASC,IAAT,QAAqB,QAArB;;AAEA,eAAe,MAAMC,WAAN,CAAiD;EAM9DC,WAAW,CAAEC,OAAF,EAAiC;IAAA,KAL5CA,OAK4C;IAAA,KAH5CC,MAG4C;IAAA,KAF5CC,IAE4C;IAC1C,KAAKF,OAAL,GAAeA,OAAf;EACD;;EAEDG,KAAK,CAAEC,WAAF,EAA4BH,MAA5B,EAAkD;IACrDI,OAAO,CAACC,GAAR,CAAY,uBAAZ;IACA,KAAKJ,IAAL,GAAYN,QAAQ,CAACW,UAAT,CAAoBH,WAApB,CAAZ;IACA,KAAKH,MAAL,GAAcA,MAAd;EACD;;EAEW,MAANO,MAAM,CAAEC,OAAF,EAA+C;IACzD,OAAO,MAAM,IAAIC,OAAJ,CAAuBC,OAAD,IAAa;MAC9C,KAAKC,UAAL,CAAgBH,OAAO,CAACI,IAAxB,EAA8BC,IAA9B,CACGC,OAAD,IAAsB;QACpBJ,OAAO,CAAC;UAAEK,QAAQ,EAAE,UAAZ;UAAwBP,OAAxB;UAAiCM;QAAjC,CAAD,CAAP;MACD,CAHH,EAIE,MAAM,CAAE,CAJV;IAMD,CAPY,CAAb;EAQD;;EAEe,MAAVH,UAAU,CAAEK,KAAF,EAAoC;IAClD,OAAO,MAAM,IAAIP,OAAJ,CAAkBC,OAAD,IAAa;MACzC,MAAMO,OAAO,GAAG;QAAEjB,MAAM,EAAE,KAAKA,MAAf;QAAuBU;MAAvB,CAAhB;MACA,MAAME,IAAI,GAAG,KAAKb,OAAL,CAAamB,UAAb,CAAwBF,KAAxB,EAA+BC,OAA/B,CAAb;MACA,KAAKE,cAAL,CAAoB,CAACP,IAAD,CAApB;IACD,CAJY,CAAb;EAKD;;EAEDQ,SAAS,GAAU,CAAE;;EAErBD,cAAc,CAAEE,QAAF,EAAiC;IAC7C,KAAKpB,IAAL,CAAUM,MAAV,eAAiB,QAAC,IAAD;MAAM,QAAQ,EAAEc;IAAhB;MAAA;MAAA;MAAA;IAAA,QAAjB;EACD;;AAvC6D"},"metadata":{},"sourceType":"module"}