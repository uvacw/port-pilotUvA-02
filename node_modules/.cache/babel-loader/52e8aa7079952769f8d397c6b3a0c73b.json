{"ast":null,"code":"var _jsxFileName = \"/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/ui/prompts/file_input.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport TextBundle from '../../../../text_bundle';\nimport { Translator } from '../../../../translator';\nimport { PrimaryButton } from '../elements/button';\nimport { BodyLarge, BodySmall } from '../elements/text';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const FileInput = props => {\n  _s();\n\n  var _selectedFile$name;\n\n  const [waiting, setWaiting] = React.useState(false);\n  const [selectedFile, setSelectedFile] = React.useState();\n  const input = React.useRef(null);\n  const {\n    resolve\n  } = props;\n  const {\n    description,\n    note,\n    placeholder,\n    extensions,\n    selectButton,\n    continueButton\n  } = prepareCopy(props);\n\n  function handleClick() {\n    var _input$current;\n\n    (_input$current = input.current) === null || _input$current === void 0 ? void 0 : _input$current.click();\n  }\n\n  function handleSelect(event) {\n    const files = event.target.files;\n\n    if (files != null && files.length > 0) {\n      setSelectedFile(files[0]);\n    } else {\n      console.log('[FileInput] Error selecting file: ' + JSON.stringify(files));\n    }\n  }\n\n  function handleConfirm() {\n    if (selectedFile !== undefined && !waiting) {\n      setWaiting(true);\n      resolve === null || resolve === void 0 ? void 0 : resolve({\n        __type__: 'PayloadFile',\n        value: selectedFile\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"select-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-wrap text-bodylarge font-body text-grey1 text-left\",\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 border-grey4 border-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: input,\n          id: \"input\",\n          type: \"file\",\n          className: \"hidden\",\n          accept: extensions,\n          onChange: handleSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row gap-4 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(BodyLarge, {\n            text: (_selectedFile$name = selectedFile === null || selectedFile === void 0 ? void 0 : selectedFile.name) !== null && _selectedFile$name !== void 0 ? _selectedFile$name : placeholder,\n            margin: \"\",\n            color: selectedFile === undefined ? 'text-grey2' : 'textgrey1'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-grow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            onClick: handleClick,\n            label: selectButton,\n            color: \"bg-tertiary text-grey1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${selectedFile === undefined ? 'opacity-30' : 'opacity-100'}`,\n        children: [/*#__PURE__*/_jsxDEV(BodySmall, {\n          text: note,\n          margin: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row gap-4\",\n          children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            label: continueButton,\n            onClick: handleConfirm,\n            enabled: selectedFile !== undefined,\n            spinning: waiting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(FileInput, \"N7qExYKq0D/9wXf0f5UGobLeZMY=\");\n\n_c = FileInput;\n\nfunction prepareCopy(_ref) {\n  let {\n    description,\n    extensions,\n    locale\n  } = _ref;\n  return {\n    description: Translator.translate(description, locale),\n    note: Translator.translate(note(), locale),\n    placeholder: Translator.translate(placeholder(), locale),\n    extensions: extensions,\n    selectButton: Translator.translate(selectButtonLabel(), locale),\n    continueButton: Translator.translate(continueButtonLabel(), locale)\n  };\n}\n\nconst continueButtonLabel = () => {\n  return new TextBundle().add('en', 'Continue').add('nl', 'Verder');\n};\n\nconst selectButtonLabel = () => {\n  return new TextBundle().add('en', 'Choose file').add('nl', 'Kies bestand');\n};\n\nconst note = () => {\n  return new TextBundle().add('en', 'Note: The process to extract the correct data from the file is done on your own computer. No data is stored or sent yet.').add('nl', 'NB: Het proces om de juiste gegevens uit het bestand te halen gebeurt op uw eigen computer. Er worden nog geen gegevens opgeslagen of verstuurd.');\n};\n\nconst placeholder = () => {\n  return new TextBundle().add('en', 'Choose a file').add('nl', 'Kies een bestand');\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"FileInput\");","map":{"version":3,"names":["React","TextBundle","Translator","PrimaryButton","BodyLarge","BodySmall","FileInput","props","waiting","setWaiting","useState","selectedFile","setSelectedFile","input","useRef","resolve","description","note","placeholder","extensions","selectButton","continueButton","prepareCopy","handleClick","current","click","handleSelect","event","files","target","length","console","log","JSON","stringify","handleConfirm","undefined","__type__","value","name","locale","translate","selectButtonLabel","continueButtonLabel","add"],"sources":["/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/ui/prompts/file_input.tsx"],"sourcesContent":["import { Weak } from '../../../../helpers'\nimport * as React from 'react'\nimport { Translatable } from '../../../../types/elements'\nimport TextBundle from '../../../../text_bundle'\nimport { Translator } from '../../../../translator'\nimport { ReactFactoryContext } from '../../factory'\nimport { PropsUIPromptFileInput } from '../../../../types/prompts'\nimport { PrimaryButton } from '../elements/button'\nimport { BodyLarge, BodySmall } from '../elements/text'\n\ntype Props = Weak<PropsUIPromptFileInput> & ReactFactoryContext\n\nexport const FileInput = (props: Props): JSX.Element => {\n  const [waiting, setWaiting] = React.useState<boolean>(false)\n  const [selectedFile, setSelectedFile] = React.useState<File>()\n  const input = React.useRef<HTMLInputElement>(null)\n\n  const { resolve } = props\n  const { description, note, placeholder, extensions, selectButton, continueButton } = prepareCopy(props)\n\n  function handleClick (): void {\n    input.current?.click()\n  }\n\n  function handleSelect (event: React.ChangeEvent<HTMLInputElement>): void {\n    const files = event.target.files\n    if (files != null && files.length > 0) {\n      setSelectedFile(files[0])\n    } else {\n      console.log('[FileInput] Error selecting file: ' + JSON.stringify(files))\n    }\n  }\n\n  function handleConfirm (): void {\n    if (selectedFile !== undefined && !waiting) {\n      setWaiting(true)\n      resolve?.({ __type__: 'PayloadFile', value: selectedFile })\n    }\n  }\n\n  return (\n    <>\n      <div id='select-panel'>\n        <div className='flex-wrap text-bodylarge font-body text-grey1 text-left'>\n          {description}\n        </div>\n        <div className='mt-8' />\n        <div className='p-6 border-grey4 border-2 rounded'>\n          <input ref={input} id='input' type='file' className='hidden' accept={extensions} onChange={handleSelect} />\n          <div className='flex flex-row gap-4 items-center'>\n            <BodyLarge text={selectedFile?.name ?? placeholder} margin='' color={selectedFile === undefined ? 'text-grey2' : 'textgrey1'} />\n            <div className='flex-grow' />\n            <PrimaryButton onClick={handleClick} label={selectButton} color='bg-tertiary text-grey1' />\n          </div>\n        </div>\n        <div className='mt-4' />\n        <div className={`${selectedFile === undefined ? 'opacity-30' : 'opacity-100'}`}>\n          <BodySmall text={note} margin='' />\n          <div className='mt-8' />\n          <div className='flex flex-row gap-4'>\n            <PrimaryButton label={continueButton} onClick={handleConfirm} enabled={selectedFile !== undefined} spinning={waiting} />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\ninterface Copy {\n  description: string\n  note: string\n  placeholder: string\n  extensions: string\n  selectButton: string\n  continueButton: string\n}\n\nfunction prepareCopy ({ description, extensions, locale }: Props): Copy {\n  return {\n    description: Translator.translate(description, locale),\n    note: Translator.translate(note(), locale),\n    placeholder: Translator.translate(placeholder(), locale),\n    extensions: extensions,\n    selectButton: Translator.translate(selectButtonLabel(), locale),\n    continueButton: Translator.translate(continueButtonLabel(), locale)\n  }\n}\n\nconst continueButtonLabel = (): Translatable => {\n  return new TextBundle()\n    .add('en', 'Continue')\n    .add('nl', 'Verder')\n}\n\nconst selectButtonLabel = (): Translatable => {\n  return new TextBundle()\n    .add('en', 'Choose file')\n    .add('nl', 'Kies bestand')\n}\n\nconst note = (): Translatable => {\n  return new TextBundle()\n    .add('en', 'Note: The process to extract the correct data from the file is done on your own computer. No data is stored or sent yet.')\n    .add('nl', 'NB: Het proces om de juiste gegevens uit het bestand te halen gebeurt op uw eigen computer. Er worden nog geen gegevens opgeslagen of verstuurd.')\n}\n\nconst placeholder = (): Translatable => {\n  return new TextBundle()\n    .add('en', 'Choose a file')\n    .add('nl', 'Kies een bestand')\n}\n"],"mappings":";;;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAGA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,kBAArC;;;AAIA,OAAO,MAAMC,SAAS,GAAIC,KAAD,IAA+B;EAAA;;EAAA;;EACtD,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,KAAK,CAACU,QAAN,CAAwB,KAAxB,CAA9B;EACA,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCZ,KAAK,CAACU,QAAN,EAAxC;EACA,MAAMG,KAAK,GAAGb,KAAK,CAACc,MAAN,CAA+B,IAA/B,CAAd;EAEA,MAAM;IAAEC;EAAF,IAAcR,KAApB;EACA,MAAM;IAAES,WAAF;IAAeC,IAAf;IAAqBC,WAArB;IAAkCC,UAAlC;IAA8CC,YAA9C;IAA4DC;EAA5D,IAA+EC,WAAW,CAACf,KAAD,CAAhG;;EAEA,SAASgB,WAAT,GAA8B;IAAA;;IAC5B,kBAAAV,KAAK,CAACW,OAAN,kEAAeC,KAAf;EACD;;EAED,SAASC,YAAT,CAAuBC,KAAvB,EAAyE;IACvE,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B;;IACA,IAAIA,KAAK,IAAI,IAAT,IAAiBA,KAAK,CAACE,MAAN,GAAe,CAApC,EAAuC;MACrClB,eAAe,CAACgB,KAAK,CAAC,CAAD,CAAN,CAAf;IACD,CAFD,MAEO;MACLG,OAAO,CAACC,GAAR,CAAY,uCAAuCC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAAnD;IACD;EACF;;EAED,SAASO,aAAT,GAAgC;IAC9B,IAAIxB,YAAY,KAAKyB,SAAjB,IAA8B,CAAC5B,OAAnC,EAA4C;MAC1CC,UAAU,CAAC,IAAD,CAAV;MACAM,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAG;QAAEsB,QAAQ,EAAE,aAAZ;QAA2BC,KAAK,EAAE3B;MAAlC,CAAH,CAAP;IACD;EACF;;EAED,oBACE;IAAA,uBACE;MAAK,EAAE,EAAC,cAAR;MAAA,wBACE;QAAK,SAAS,EAAC,yDAAf;QAAA,UACGK;MADH;QAAA;QAAA;QAAA;MAAA,QADF,eAIE;QAAK,SAAS,EAAC;MAAf;QAAA;QAAA;QAAA;MAAA,QAJF,eAKE;QAAK,SAAS,EAAC,mCAAf;QAAA,wBACE;UAAO,GAAG,EAAEH,KAAZ;UAAmB,EAAE,EAAC,OAAtB;UAA8B,IAAI,EAAC,MAAnC;UAA0C,SAAS,EAAC,QAApD;UAA6D,MAAM,EAAEM,UAArE;UAAiF,QAAQ,EAAEO;QAA3F;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,SAAS,EAAC,kCAAf;UAAA,wBACE,QAAC,SAAD;YAAW,IAAI,wBAAEf,YAAF,aAAEA,YAAF,uBAAEA,YAAY,CAAE4B,IAAhB,mEAAwBrB,WAAvC;YAAoD,MAAM,EAAC,EAA3D;YAA8D,KAAK,EAAEP,YAAY,KAAKyB,SAAjB,GAA6B,YAA7B,GAA4C;UAAjH;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAK,SAAS,EAAC;UAAf;YAAA;YAAA;YAAA;UAAA,QAFF,eAGE,QAAC,aAAD;YAAe,OAAO,EAAEb,WAAxB;YAAqC,KAAK,EAAEH,YAA5C;YAA0D,KAAK,EAAC;UAAhE;YAAA;YAAA;YAAA;UAAA,QAHF;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QALF,eAaE;QAAK,SAAS,EAAC;MAAf;QAAA;QAAA;QAAA;MAAA,QAbF,eAcE;QAAK,SAAS,EAAG,GAAET,YAAY,KAAKyB,SAAjB,GAA6B,YAA7B,GAA4C,aAAc,EAA7E;QAAA,wBACE,QAAC,SAAD;UAAW,IAAI,EAAEnB,IAAjB;UAAuB,MAAM,EAAC;QAA9B;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,SAAS,EAAC;QAAf;UAAA;UAAA;UAAA;QAAA,QAFF,eAGE;UAAK,SAAS,EAAC,qBAAf;UAAA,uBACE,QAAC,aAAD;YAAe,KAAK,EAAEI,cAAtB;YAAsC,OAAO,EAAEc,aAA/C;YAA8D,OAAO,EAAExB,YAAY,KAAKyB,SAAxF;YAAmG,QAAQ,EAAE5B;UAA7G;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAHF;MAAA;QAAA;QAAA;QAAA;MAAA,QAdF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF,iBADF;AA0BD,CAtDM;;GAAMF,S;;KAAAA,S;;AAiEb,SAASgB,WAAT,OAAwE;EAAA,IAAlD;IAAEN,WAAF;IAAeG,UAAf;IAA2BqB;EAA3B,CAAkD;EACtE,OAAO;IACLxB,WAAW,EAAEd,UAAU,CAACuC,SAAX,CAAqBzB,WAArB,EAAkCwB,MAAlC,CADR;IAELvB,IAAI,EAAEf,UAAU,CAACuC,SAAX,CAAqBxB,IAAI,EAAzB,EAA6BuB,MAA7B,CAFD;IAGLtB,WAAW,EAAEhB,UAAU,CAACuC,SAAX,CAAqBvB,WAAW,EAAhC,EAAoCsB,MAApC,CAHR;IAILrB,UAAU,EAAEA,UAJP;IAKLC,YAAY,EAAElB,UAAU,CAACuC,SAAX,CAAqBC,iBAAiB,EAAtC,EAA0CF,MAA1C,CALT;IAMLnB,cAAc,EAAEnB,UAAU,CAACuC,SAAX,CAAqBE,mBAAmB,EAAxC,EAA4CH,MAA5C;EANX,CAAP;AAQD;;AAED,MAAMG,mBAAmB,GAAG,MAAoB;EAC9C,OAAO,IAAI1C,UAAJ,GACJ2C,GADI,CACA,IADA,EACM,UADN,EAEJA,GAFI,CAEA,IAFA,EAEM,QAFN,CAAP;AAGD,CAJD;;AAMA,MAAMF,iBAAiB,GAAG,MAAoB;EAC5C,OAAO,IAAIzC,UAAJ,GACJ2C,GADI,CACA,IADA,EACM,aADN,EAEJA,GAFI,CAEA,IAFA,EAEM,cAFN,CAAP;AAGD,CAJD;;AAMA,MAAM3B,IAAI,GAAG,MAAoB;EAC/B,OAAO,IAAIhB,UAAJ,GACJ2C,GADI,CACA,IADA,EACM,0HADN,EAEJA,GAFI,CAEA,IAFA,EAEM,kJAFN,CAAP;AAGD,CAJD;;AAMA,MAAM1B,WAAW,GAAG,MAAoB;EACtC,OAAO,IAAIjB,UAAJ,GACJ2C,GADI,CACA,IADA,EACM,eADN,EAEJA,GAFI,CAEA,IAFA,EAEM,kBAFN,CAAP;AAGD,CAJD"},"metadata":{},"sourceType":"module"}