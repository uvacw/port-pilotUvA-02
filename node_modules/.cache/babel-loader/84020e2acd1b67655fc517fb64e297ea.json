{"ast":null,"code":"var _jsxFileName = \"/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/ui/elements/table.tsx\",\n    _s = $RefreshSig$();\n\nimport _ from 'lodash';\nimport React from 'react';\nimport TextBundle from '../../../../text_bundle';\nimport { Translator } from '../../../../translator';\nimport { BackIconButton, ForwardIconButton, IconLabelButton } from './button';\nimport { CheckBox } from './check_box';\nimport { SearchBar } from './search_bar';\nimport { Caption, Label, Title3 } from './text';\nimport UndoSvg from '../../../../../assets/images/undo.svg';\nimport DeleteSvg from '../../../../../assets/images/delete.svg';\nimport { PageIcon } from './page_icon';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Table = _ref => {\n  _s();\n\n  let {\n    id,\n    head,\n    body,\n    readOnly = false,\n    pageSize = 7,\n    locale,\n    onChange\n  } = _ref;\n  const pageWindowLegSize = 3;\n  const query = React.useRef([]);\n  const alteredRows = React.useRef(body.rows);\n  const filteredRows = React.useRef(alteredRows.current);\n  const initialState = {\n    edit: false,\n    pageCount: getPageCount(),\n    page: 0,\n    pageWindow: updatePageWindow(0),\n    rows: updateRows(0),\n    selected: [],\n    deletedCount: 0,\n    visibility: {\n      search: alteredRows.current.length > pageSize,\n      delete: false,\n      undo: false,\n      table: filteredRows.current.length > 0,\n      noData: filteredRows.current.length === 0,\n      noDataLeft: false,\n      noResults: false\n    }\n  };\n  const [state, setState] = React.useState(initialState);\n  const copy = prepareCopy(locale);\n\n  function display(element) {\n    return visible(element) ? '' : 'hidden';\n  }\n\n  function visible(element) {\n    if (typeof state.visibility[element] === 'boolean') {\n      return state.visibility[element];\n    }\n\n    return false;\n  }\n\n  function updatePageWindow(currentPage) {\n    const pageWindowSize = pageWindowLegSize * 2 + 1;\n    const pageCount = getPageCount();\n    let range = [];\n\n    if (pageWindowSize >= pageCount && pageCount > 0) {\n      range = _.range(0, Math.min(pageCount, pageWindowSize));\n    } else if (pageWindowSize < pageCount) {\n      const maxIndex = pageCount - 1;\n      let start;\n      let end;\n\n      if (currentPage < pageWindowLegSize) {\n        // begin\n        start = 0;\n        end = Math.min(pageCount, pageWindowSize);\n      } else if (maxIndex - currentPage <= pageWindowLegSize) {\n        // end\n        start = maxIndex - (pageWindowSize - 1);\n        end = maxIndex + 1;\n      } else {\n        // middle\n        start = currentPage - pageWindowLegSize;\n        end = currentPage + pageWindowLegSize + 1;\n      }\n\n      range = _.range(start, end);\n    }\n\n    return range;\n  }\n\n  function getPageCount() {\n    if (filteredRows.current.length === 0) {\n      return 0;\n    }\n\n    return Math.ceil(filteredRows.current.length / pageSize);\n  }\n\n  function updateRows(currentPage) {\n    const offset = currentPage * pageSize;\n    return filteredRows.current.slice(offset, offset + pageSize);\n  }\n\n  function renderHeadRow(props) {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [state.edit ? renderHeadCheck() : '', props.cells.map((cell, index) => renderHeadCell(cell, index))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderHeadCheck() {\n    const selected = state.selected.length > 0 && state.selected.length === state.rows.length;\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"pl-4 w-10\",\n      children: /*#__PURE__*/_jsxDEV(CheckBox, {\n        id: \"-1\",\n        selected: selected,\n        onSelect: () => handleSelectHead()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, 'check-head', false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderHeadCell(props, index) {\n    return /*#__PURE__*/_jsxDEV(\"th\", {\n      className: \"h-12 px-4 text-left\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-table-header text-table text-grey1\",\n        children: props.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, `${index}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderRows() {\n    return state.rows.map((row, index) => renderRow(row, index));\n  }\n\n  function renderRow(row, rowIndex) {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      className: \"hover:bg-grey6\",\n      children: [state.edit ? renderRowCheck(row.id) : '', row.cells.map((cell, cellIndex) => renderRowCell(cell, cellIndex))]\n    }, `${rowIndex}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderRowCheck(rowId) {\n    const selected = state.selected.includes(rowId);\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"pl-4\",\n      children: /*#__PURE__*/_jsxDEV(CheckBox, {\n        id: rowId,\n        selected: selected,\n        onSelect: () => handleSelectRow(rowId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)\n    }, `check-${rowId}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderRowCell(_ref2, cellIndex) {\n    let {\n      text\n    } = _ref2;\n    const body = isValidHttpUrl(text) ? renderRowLink(text) : renderRowText(text);\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"h-12 px-4\",\n      children: body\n    }, `${cellIndex}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderRowText(text) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-table-row text-table text-grey1\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 12\n    }, this);\n  }\n\n  function renderRowLink(href) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-table-row text-table text-primary underline\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: href,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        title: href,\n        children: copy.link\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  }\n\n  function isValidHttpUrl(value) {\n    let url;\n\n    try {\n      url = new URL(value);\n    } catch (_) {\n      return false;\n    }\n\n    return url.protocol === 'http:' || url.protocol === 'https:';\n  }\n\n  function renderPageIcons() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row gap-2\",\n      children: state.pageWindow.map(page => renderPageIcon(page))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this);\n  }\n\n  function renderPageIcon(index) {\n    return /*#__PURE__*/_jsxDEV(PageIcon, {\n      index: index + 1,\n      selected: state.page === index,\n      onClick: () => handleNewPage(index)\n    }, `page-${index}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 12\n    }, this);\n  }\n\n  function filterRows() {\n    if (query.current.length === 0) {\n      return alteredRows.current;\n    }\n\n    return alteredRows.current.filter(row => matchRow(row, query.current));\n  }\n\n  function matchRow(row, query) {\n    const rowText = row.cells.map(cell => cell.text).join(' ');\n    return query.find(word => !rowText.includes(word)) === undefined;\n  }\n\n  function handleSelectHead() {\n    const allRowsSelected = state.selected.length === state.rows.length;\n\n    if (allRowsSelected) {\n      setState(state => {\n        return { ...state,\n          selected: []\n        };\n      });\n    } else {\n      handleSelectAll();\n    }\n  }\n\n  function handleSelectRow(rowId) {\n    setState(state => {\n      const selected = state.selected.slice(0);\n      const index = selected.indexOf(rowId);\n\n      if (index === -1) {\n        selected.push(rowId);\n      } else {\n        selected.splice(index, 1);\n      }\n\n      return { ...state,\n        selected\n      };\n    });\n  }\n\n  function handleSelectAll() {\n    setState(state => {\n      const selected = state.rows.map(row => row.id);\n      return { ...state,\n        selected\n      };\n    });\n  }\n\n  function handlePrevious() {\n    setState(state => {\n      const page = state.page === 0 ? state.pageCount - 1 : state.page - 1;\n      const pageWindow = updatePageWindow(page);\n      const rows = updateRows(page);\n      return { ...state,\n        page,\n        pageWindow,\n        rows\n      };\n    });\n  }\n\n  function handleNext() {\n    setState(state => {\n      const page = state.page === state.pageCount - 1 ? 0 : state.page + 1;\n      const pageWindow = updatePageWindow(page);\n      const rows = updateRows(page);\n      return { ...state,\n        page,\n        pageWindow,\n        rows\n      };\n    });\n  }\n\n  function handleDeleteSelected() {\n    const currentSelectedRows = state.selected.slice(0);\n    if (currentSelectedRows.length === 0) return;\n    const newAlteredRows = alteredRows.current.slice(0);\n\n    for (const rowId of currentSelectedRows) {\n      const index = newAlteredRows.findIndex(row => row.id === rowId);\n\n      if (index !== -1) {\n        newAlteredRows.splice(index, 1);\n      }\n    }\n\n    alteredRows.current = newAlteredRows;\n    filteredRows.current = filterRows();\n    setState(state => {\n      const pageCount = getPageCount();\n      const page = Math.max(0, Math.min(pageCount - 1, state.page));\n      const pageWindow = updatePageWindow(page);\n      const rows = updateRows(page);\n      const deletedCount = body.rows.length - alteredRows.current.length;\n      const visibility = { ...state.visibility,\n        undo: deletedCount > 0,\n        table: filteredRows.current.length > 0,\n        noData: false,\n        noDataLeft: alteredRows.current.length === 0,\n        noResults: alteredRows.current.length > 0 && filteredRows.current.length === 0\n      };\n      return { ...state,\n        page,\n        pageCount,\n        pageWindow,\n        rows,\n        deletedCount,\n        selected: [],\n        visibility\n      };\n    });\n    onChange(id, alteredRows.current);\n  }\n\n  function handleUndo() {\n    alteredRows.current = body.rows;\n    filteredRows.current = filterRows();\n    setState(state => {\n      const pageCount = getPageCount();\n      const page = Math.min(pageCount, state.page);\n      const pageWindow = updatePageWindow(page);\n      const rows = updateRows(state.page);\n      const visibility = { ...state.visibility,\n        undo: false,\n        table: filteredRows.current.length > 0,\n        noData: false,\n        noDataLeft: false,\n        noResults: filteredRows.current.length === 0\n      };\n      return { ...state,\n        page,\n        pageCount,\n        pageWindow,\n        rows,\n        deletedCount: 0,\n        selected: [],\n        visibility\n      };\n    });\n    onChange(id, body.rows);\n  }\n\n  function handleSearch(newQuery) {\n    query.current = newQuery;\n    filteredRows.current = filterRows();\n    setState(state => {\n      const pageCount = getPageCount();\n      const page = Math.min(pageCount, state.page);\n      const pageWindow = updatePageWindow(page);\n      const rows = updateRows(state.page);\n      const visibility = { ...state.visibility,\n        table: filteredRows.current.length > 0,\n        noData: body.rows.length === 0,\n        noDataLeft: body.rows.length > 0 && alteredRows.current.length === 0,\n        noResults: body.rows.length > 0 && alteredRows.current.length > 0 && filteredRows.current.length === 0\n      };\n      return { ...state,\n        page,\n        pageCount,\n        pageWindow,\n        rows,\n        visibility\n      };\n    });\n  }\n\n  function handleNewPage(page) {\n    setState(state => {\n      const rows = updateRows(page);\n      return { ...state,\n        page,\n        rows\n      };\n    });\n  }\n\n  function handleEditToggle() {\n    setState(state => {\n      const edit = !state.edit;\n      const visibility = { ...state.visibility,\n        delete: edit\n      };\n      return { ...state,\n        edit,\n        visibility\n      };\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row gap-4 items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex flex-row items-center gap-2 mt-2 ${body.rows.length <= pageSize ? 'hidden' : ''} `,\n        children: [/*#__PURE__*/_jsxDEV(BackIconButton, {\n          onClick: handlePrevious\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: renderPageIcons()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ForwardIconButton, {\n          onClick: handleNext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Caption, {\n        text: copy.pages,\n        color: \"text-grey2\",\n        margin: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${display('search')}`,\n        children: /*#__PURE__*/_jsxDEV(SearchBar, {\n          placeholder: copy.searchPlaceholder,\n          onSearch: query => handleSearch(query)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-col gap-4 justify-center h-full ${display('table')}`,\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"text-grey1 table-fixed divide-y divide-grey4\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: renderHeadRow(head)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"divide-y divide-grey4\",\n          children: renderRows()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noData')}`,\n      children: /*#__PURE__*/_jsxDEV(Title3, {\n        text: copy.noData,\n        color: \"text-grey3\",\n        margin: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noDataLeft')}`,\n      children: /*#__PURE__*/_jsxDEV(Title3, {\n        text: copy.noDataLeft,\n        color: \"text-grey3\",\n        margin: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noResults')}`,\n      children: /*#__PURE__*/_jsxDEV(Title3, {\n        text: copy.noResults,\n        color: \"text-grey3\",\n        margin: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex flex-row items-center gap-6 mt-2 h-8 ${body.rows.length === 0 ? 'hidden' : ''} `,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row gap-4 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(CheckBox, {\n          id: \"edit\",\n          selected: state.edit,\n          onSelect: handleEditToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          text: copy.edit,\n          margin: \"mt-1px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${display('delete')} mt-1px`,\n        children: /*#__PURE__*/_jsxDEV(IconLabelButton, {\n          label: copy.delete,\n          color: \"text-delete\",\n          icon: DeleteSvg,\n          onClick: handleDeleteSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        text: copy.deleted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${display('undo')}`,\n        children: /*#__PURE__*/_jsxDEV(IconLabelButton, {\n          label: copy.undo,\n          color: \"text-primary\",\n          icon: UndoSvg,\n          onClick: handleUndo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  function prepareCopy(locale) {\n    return {\n      edit: Translator.translate(editLabel, locale),\n      undo: Translator.translate(undoLabel, locale),\n      noData: Translator.translate(noDataLabel, locale),\n      noDataLeft: Translator.translate(noDataLeftLabel, locale),\n      noResults: Translator.translate(noResultsLabel, locale),\n      pages: Translator.translate(pagesLabel(state.pageCount), locale),\n      delete: Translator.translate(deleteLabel, locale),\n      deleted: Translator.translate(deletedLabel(body.rows.length - alteredRows.current.length), locale),\n      searchPlaceholder: Translator.translate(searchPlaceholder, locale),\n      link: Translator.translate(link, locale)\n    };\n  }\n};\n\n_s(Table, \"7NXwuTrjPty1gR+HUb/kFbO1TUw=\");\n\n_c = Table;\nconst link = new TextBundle().add('en', 'Check out').add('nl', 'Bekijk');\nconst searchPlaceholder = new TextBundle().add('en', 'Search').add('nl', 'Zoeken');\nconst noDataLabel = new TextBundle().add('en', 'No data found').add('nl', 'Geen gegevens gevonden');\nconst noDataLeftLabel = new TextBundle().add('en', 'All data removed').add('nl', 'Alle gegevens verwijderd');\nconst noResultsLabel = new TextBundle().add('en', 'No search results').add('nl', 'Geen zoek resultaten');\nconst editLabel = new TextBundle().add('en', 'Adjust').add('nl', 'Aanpassen');\nconst undoLabel = new TextBundle().add('en', 'Undo').add('nl', 'Herstel');\nconst deleteLabel = new TextBundle().add('en', 'Delete selected').add('nl', 'Verwijder selectie');\n\nfunction deletedNoneRowLabel() {\n  return new TextBundle().add('en', 'No adjustments').add('nl', 'Geen aanpassingen');\n}\n\nfunction deletedRowLabel(amount) {\n  return new TextBundle().add('en', `${amount} row deleted`).add('nl', `${amount} rij verwijderd`);\n}\n\nfunction deletedRowsLabel(amount) {\n  return new TextBundle().add('en', `${amount} rows deleted`).add('nl', `${amount} rijen verwijderd`);\n}\n\nfunction deletedLabel(amount) {\n  if (amount === 0) return deletedNoneRowLabel();\n  if (amount === 1) return deletedRowLabel(amount);\n  return deletedRowsLabel(amount);\n}\n\nfunction singlePageLabel() {\n  return new TextBundle().add('en', '1 page').add('nl', '1 pagina');\n}\n\nfunction multiplePagesLabel(amount) {\n  return new TextBundle().add('en', `${amount} pages`).add('nl', `${amount} pagina's`);\n}\n\nfunction pagesLabel(amount) {\n  if (amount === 1) return singlePageLabel();\n  return multiplePagesLabel(amount);\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"names":["_","React","TextBundle","Translator","BackIconButton","ForwardIconButton","IconLabelButton","CheckBox","SearchBar","Caption","Label","Title3","UndoSvg","DeleteSvg","PageIcon","Table","id","head","body","readOnly","pageSize","locale","onChange","pageWindowLegSize","query","useRef","alteredRows","rows","filteredRows","current","initialState","edit","pageCount","getPageCount","page","pageWindow","updatePageWindow","updateRows","selected","deletedCount","visibility","search","length","delete","undo","table","noData","noDataLeft","noResults","state","setState","useState","copy","prepareCopy","display","element","visible","currentPage","pageWindowSize","range","Math","min","maxIndex","start","end","ceil","offset","slice","renderHeadRow","props","renderHeadCheck","cells","map","cell","index","renderHeadCell","handleSelectHead","text","renderRows","row","renderRow","rowIndex","renderRowCheck","cellIndex","renderRowCell","rowId","includes","handleSelectRow","isValidHttpUrl","renderRowLink","renderRowText","href","link","value","url","URL","protocol","renderPageIcons","renderPageIcon","handleNewPage","filterRows","filter","matchRow","rowText","join","find","word","undefined","allRowsSelected","handleSelectAll","indexOf","push","splice","handlePrevious","handleNext","handleDeleteSelected","currentSelectedRows","newAlteredRows","findIndex","max","handleUndo","handleSearch","newQuery","handleEditToggle","pages","searchPlaceholder","deleted","translate","editLabel","undoLabel","noDataLabel","noDataLeftLabel","noResultsLabel","pagesLabel","deleteLabel","deletedLabel","add","deletedNoneRowLabel","deletedRowLabel","amount","deletedRowsLabel","singlePageLabel","multiplePagesLabel"],"sources":["/Users/t.b.araujouva.nl/Documents/GitHub/port-pilotUvA-02/src/framework/visualisation/react/ui/elements/table.tsx"],"sourcesContent":["import _ from 'lodash'\nimport React from 'react'\nimport { Weak } from '../../../../helpers'\nimport TextBundle from '../../../../text_bundle'\nimport { Translator } from '../../../../translator'\nimport { PropsUITable, PropsUITableCell, PropsUITableHead, PropsUITableRow } from '../../../../types/elements'\nimport { ReactFactoryContext } from '../../factory'\nimport { BackIconButton, ForwardIconButton, IconLabelButton } from './button'\nimport { CheckBox } from './check_box'\nimport { SearchBar } from './search_bar'\nimport { Caption, Label, Title3 } from './text'\nimport UndoSvg from '../../../../../assets/images/undo.svg'\nimport DeleteSvg from '../../../../../assets/images/delete.svg'\nimport { PageIcon } from './page_icon'\n\ntype Props = Weak<PropsUITable> & TableContext & ReactFactoryContext\n\nexport interface TableContext {\n  onChange: (id: string, rows: PropsUITableRow[]) => void\n}\n\ninterface Visibility {\n  search: boolean\n  undo: boolean\n  delete: boolean\n  table: boolean\n  noData: boolean\n  noDataLeft: boolean\n  noResults: boolean\n}\n\ninterface State {\n  edit: boolean\n  page: number\n  pageCount: number\n  pageWindow: number[]\n  rows: PropsUITableRow[]\n  selected: string[]\n  deletedCount: number\n  visibility: Visibility\n}\n\nexport const Table = ({ id, head, body, readOnly = false, pageSize = 7, locale, onChange }: Props): JSX.Element => {\n  const pageWindowLegSize = 3\n\n  const query = React.useRef<string[]>([])\n  const alteredRows = React.useRef<PropsUITableRow[]>(body.rows)\n  const filteredRows = React.useRef<PropsUITableRow[]>(alteredRows.current)\n\n  const initialState: State = {\n    edit: false,\n    pageCount: getPageCount(),\n    page: 0,\n    pageWindow: updatePageWindow(0),\n    rows: updateRows(0),\n    selected: [],\n    deletedCount: 0,\n    visibility: {\n      search: alteredRows.current.length > pageSize,\n      delete: false,\n      undo: false,\n      table: filteredRows.current.length > 0,\n      noData: filteredRows.current.length === 0,\n      noDataLeft: false,\n      noResults: false\n    }\n  }\n\n  const [state, setState] = React.useState<State>(initialState)\n\n  const copy = prepareCopy(locale)\n\n  function display (element: keyof Visibility): string {\n    return visible(element) ? '' : 'hidden'\n  }\n\n  function visible (element: keyof Visibility): boolean {\n    if (typeof state.visibility[element] === 'boolean') {\n      return state.visibility[element]\n    }\n    return false\n  }\n\n  function updatePageWindow (currentPage: number): number[] {\n    const pageWindowSize = (pageWindowLegSize * 2) + 1\n    const pageCount = getPageCount()\n\n    let range: number[] = []\n    if (pageWindowSize >= pageCount && pageCount > 0) {\n      range = _.range(0, Math.min(pageCount, pageWindowSize))\n    } else if (pageWindowSize < pageCount) {\n      const maxIndex = pageCount - 1\n\n      let start: number\n      let end: number\n\n      if (currentPage < pageWindowLegSize) {\n        // begin\n        start = 0\n        end = Math.min(pageCount, pageWindowSize)\n      } else if (maxIndex - currentPage <= pageWindowLegSize) {\n        // end\n        start = maxIndex - (pageWindowSize - 1)\n        end = maxIndex + 1\n      } else {\n        // middle\n        start = currentPage - pageWindowLegSize\n        end = currentPage + pageWindowLegSize + 1\n      }\n      range = _.range(start, end)\n    }\n\n    return range\n  }\n\n  function getPageCount (): number {\n    if (filteredRows.current.length === 0) {\n      return 0\n    }\n\n    return Math.ceil(filteredRows.current.length / pageSize)\n  }\n\n  function updateRows (currentPage: number): PropsUITableRow[] {\n    const offset = currentPage * pageSize\n    return filteredRows.current.slice(offset, offset + pageSize)\n  }\n\n  function renderHeadRow (props: Weak<PropsUITableHead>): JSX.Element {\n    return (\n      <tr>\n        {state.edit ? renderHeadCheck() : ''}\n        {props.cells.map((cell, index) => renderHeadCell(cell, index))}\n      </tr>\n    )\n  }\n\n  function renderHeadCheck (): JSX.Element {\n    const selected = state.selected.length > 0 && state.selected.length === state.rows.length\n    return (\n      <td key='check-head' className='pl-4 w-10'>\n        <CheckBox id='-1' selected={selected} onSelect={() => handleSelectHead()} />\n      </td>\n    )\n  }\n\n  function renderHeadCell (props: Weak<PropsUITableCell>, index: number): JSX.Element {\n    return (\n      <th key={`${index}`} className='h-12 px-4 text-left'>\n        <div className='font-table-header text-table text-grey1'>{props.text}</div>\n      </th>\n    )\n  }\n\n  function renderRows (): JSX.Element[] {\n    return state.rows.map((row, index) => renderRow(row, index))\n  }\n\n  function renderRow (row: PropsUITableRow, rowIndex: number): JSX.Element {\n    return (\n      <tr key={`${rowIndex}`} className='hover:bg-grey6'>\n        {state.edit ? renderRowCheck(row.id) : ''}\n        {row.cells.map((cell, cellIndex) => renderRowCell(cell, cellIndex))}\n      </tr>\n    )\n  }\n\n  function renderRowCheck (rowId: string): JSX.Element {\n    const selected = state.selected.includes(rowId)\n    return (\n      <td key={`check-${rowId}`} className='pl-4'>\n        <CheckBox id={rowId} selected={selected} onSelect={() => handleSelectRow(rowId)} />\n      </td>\n    )\n  }\n\n  function renderRowCell ({ text }: Weak<PropsUITableCell>, cellIndex: number): JSX.Element {\n    const body = isValidHttpUrl(text) ? renderRowLink(text) : renderRowText(text)\n\n    return (\n      <td key={`${cellIndex}`} className='h-12 px-4'>\n        {body}\n      </td>\n    )\n  }\n\n  function renderRowText (text: string): JSX.Element {\n    return <div className='font-table-row text-table text-grey1'>{text}</div>\n  }\n\n  function renderRowLink (href: string): JSX.Element {\n    return (\n      <div className='font-table-row text-table text-primary underline'>\n        <a href={href} target='_blank' rel='noreferrer' title={href}>{copy.link}</a>\n      </div>\n    )\n  }\n\n  function isValidHttpUrl (value: string): boolean {\n    let url\n    try {\n      url = new URL(value)\n    } catch (_) {\n      return false\n    }\n    return url.protocol === 'http:' || url.protocol === 'https:'\n  }\n\n  function renderPageIcons (): JSX.Element {\n    return (\n      <div className='flex flex-row gap-2'>\n        {state.pageWindow.map((page) => renderPageIcon(page))}\n      </div>\n    )\n  }\n\n  function renderPageIcon (index: number): JSX.Element {\n    return <PageIcon key={`page-${index}`} index={index + 1} selected={state.page === index} onClick={() => handleNewPage(index)} />\n  }\n\n  function filterRows (): PropsUITableRow[] {\n    if (query.current.length === 0) {\n      return alteredRows.current\n    }\n    return alteredRows.current.filter((row) => matchRow(row, query.current))\n  }\n\n  function matchRow (row: PropsUITableRow, query: string[]): boolean {\n    const rowText = row.cells.map((cell) => cell.text).join(' ')\n    return query.find((word) => !rowText.includes(word)) === undefined\n  }\n\n  function handleSelectHead (): void {\n    const allRowsSelected = state.selected.length === state.rows.length\n    if (allRowsSelected) {\n      setState((state) => {\n        return { ...state, selected: [] }\n      })\n    } else {\n      handleSelectAll()\n    }\n  }\n\n  function handleSelectRow (rowId: string): void {\n    setState((state) => {\n      const selected = state.selected.slice(0)\n      const index = selected.indexOf(rowId)\n      if (index === -1) {\n        selected.push(rowId)\n      } else {\n        selected.splice(index, 1)\n      }\n      return { ...state, selected }\n    })\n  }\n\n  function handleSelectAll (): void {\n    setState((state) => {\n      const selected = state.rows.map((row) => row.id)\n      return { ...state, selected }\n    })\n  }\n\n  function handlePrevious (): void {\n    setState((state) => {\n      const page = state.page === 0 ? state.pageCount - 1 : state.page - 1\n      const pageWindow = updatePageWindow(page)\n      const rows = updateRows(page)\n      return { ...state, page, pageWindow, rows }\n    })\n  }\n\n  function handleNext (): void {\n    setState((state) => {\n      const page = state.page === state.pageCount - 1 ? 0 : state.page + 1\n      const pageWindow = updatePageWindow(page)\n      const rows = updateRows(page)\n      return { ...state, page, pageWindow, rows }\n    })\n  }\n\n  function handleDeleteSelected (): void {\n    const currentSelectedRows = state.selected.slice(0)\n    if (currentSelectedRows.length === 0) return\n\n    const newAlteredRows = alteredRows.current.slice(0)\n\n    for (const rowId of currentSelectedRows) {\n      const index = newAlteredRows.findIndex((row) => row.id === rowId)\n      if (index !== -1) {\n        newAlteredRows.splice(index, 1)\n      }\n    }\n\n    alteredRows.current = newAlteredRows\n    filteredRows.current = filterRows()\n\n    setState((state) => {\n      const pageCount = getPageCount()\n      const page = Math.max(0, Math.min(pageCount - 1, state.page))\n      const pageWindow = updatePageWindow(page)\n      const rows = updateRows(page)\n      const deletedCount = body.rows.length - alteredRows.current.length\n      const visibility = {\n        ...state.visibility,\n        undo: deletedCount > 0,\n        table: filteredRows.current.length > 0,\n        noData: false,\n        noDataLeft: alteredRows.current.length === 0,\n        noResults: alteredRows.current.length > 0 && filteredRows.current.length === 0\n      }\n      return { ...state, page, pageCount, pageWindow, rows, deletedCount, selected: [], visibility }\n    })\n\n    onChange(id, alteredRows.current)\n  }\n\n  function handleUndo (): void {\n    alteredRows.current = body.rows\n    filteredRows.current = filterRows()\n    setState((state) => {\n      const pageCount = getPageCount()\n      const page = Math.min(pageCount, state.page)\n      const pageWindow = updatePageWindow(page)\n      const rows = updateRows(state.page)\n\n      const visibility = {\n        ...state.visibility,\n        undo: false,\n        table: filteredRows.current.length > 0,\n        noData: false,\n        noDataLeft: false,\n        noResults: filteredRows.current.length === 0\n      }\n      return { ...state, page, pageCount, pageWindow, rows, deletedCount: 0, selected: [], visibility }\n    })\n\n    onChange(id, body.rows)\n  }\n\n  function handleSearch (newQuery: string[]): void {\n    query.current = newQuery\n    filteredRows.current = filterRows()\n    setState((state) => {\n      const pageCount = getPageCount()\n      const page = Math.min(pageCount, state.page)\n      const pageWindow = updatePageWindow(page)\n      const rows = updateRows(state.page)\n      const visibility = {\n        ...state.visibility,\n        table: filteredRows.current.length > 0,\n        noData: body.rows.length === 0,\n        noDataLeft: body.rows.length > 0 && alteredRows.current.length === 0,\n        noResults: body.rows.length > 0 && alteredRows.current.length > 0 && filteredRows.current.length === 0\n      }\n      return { ...state, page, pageCount, pageWindow, rows, visibility }\n    })\n  }\n\n  function handleNewPage (page: number): void {\n    setState((state) => {\n      const rows = updateRows(page)\n      return { ...state, page, rows }\n    })\n  }\n\n  function handleEditToggle (): void {\n    setState((state) => {\n      const edit = !state.edit\n      const visibility = {\n        ...state.visibility,\n        delete: edit\n      }\n      return { ...state, edit, visibility }\n    })\n  }\n\n  return (\n    <>\n      <div className='flex flex-row gap-4 items-center'>\n        <div className={`flex flex-row items-center gap-2 mt-2 ${body.rows.length <= pageSize ? 'hidden' : ''} `}>\n          <BackIconButton onClick={handlePrevious} />\n          <div>\n            {renderPageIcons()}\n          </div>\n          <ForwardIconButton onClick={handleNext} />\n        </div>\n        <div className='flex-grow' />\n        <Caption text={copy.pages} color='text-grey2' margin='' />\n        <div className={`${display('search')}`}>\n          <SearchBar placeholder={copy.searchPlaceholder} onSearch={(query) => handleSearch(query)} />\n        </div>\n      </div>\n      <div className={`flex flex-col gap-4 justify-center h-full ${display('table')}`}>\n        <table className='text-grey1 table-fixed divide-y divide-grey4'>\n          <thead>\n            {renderHeadRow(head)}\n          </thead>\n          <tbody className='divide-y divide-grey4'>\n            {renderRows()}\n          </tbody>\n        </table>\n      </div>\n      <div className={`flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noData')}`}>\n        <Title3 text={copy.noData} color='text-grey3' margin='' />\n      </div>\n      <div className={`flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noDataLeft')}`}>\n        <Title3 text={copy.noDataLeft} color='text-grey3' margin='' />\n      </div>\n      <div className={`flex flex-col justify-center items-center w-full h-table bg-grey6 ${display('noResults')}`}>\n        <Title3 text={copy.noResults} color='text-grey3' margin='' />\n      </div>\n      <div className={`flex flex-row items-center gap-6 mt-2 h-8 ${body.rows.length === 0 ? 'hidden' : ''} `}>\n        <div className='flex flex-row gap-4 items-center'>\n          <CheckBox id='edit' selected={state.edit} onSelect={handleEditToggle} />\n          <Label text={copy.edit} margin='mt-1px' />\n        </div>\n        <div className={`${display('delete')} mt-1px`}>\n          <IconLabelButton label={copy.delete} color='text-delete' icon={DeleteSvg} onClick={handleDeleteSelected} />\n        </div>\n        <div className='flex-grow' />\n        <Label text={copy.deleted} />\n        <div className={`${display('undo')}`}>\n          <IconLabelButton label={copy.undo} color='text-primary' icon={UndoSvg} onClick={handleUndo} />\n        </div>\n      </div>\n    </>\n  )\n\n  function prepareCopy (locale: string): Copy {\n    return {\n      edit: Translator.translate(editLabel, locale),\n      undo: Translator.translate(undoLabel, locale),\n      noData: Translator.translate(noDataLabel, locale),\n      noDataLeft: Translator.translate(noDataLeftLabel, locale),\n      noResults: Translator.translate(noResultsLabel, locale),\n      pages: Translator.translate(pagesLabel(state.pageCount), locale),\n      delete: Translator.translate(deleteLabel, locale),\n      deleted: Translator.translate(deletedLabel(body.rows.length - alteredRows.current.length), locale),\n      searchPlaceholder: Translator.translate(searchPlaceholder, locale),\n      link: Translator.translate(link, locale)\n    }\n  }\n}\n\ninterface Copy {\n  edit: string\n  undo: string\n  noData: string\n  noDataLeft: string\n  noResults: string\n  pages: string\n  delete: string\n  deleted: string\n  searchPlaceholder: string\n  link: String\n}\n\nconst link = new TextBundle()\n  .add('en', 'Check out')\n  .add('nl', 'Bekijk')\n\nconst searchPlaceholder = new TextBundle()\n  .add('en', 'Search')\n  .add('nl', 'Zoeken')\n\nconst noDataLabel = new TextBundle()\n  .add('en', 'No data found')\n  .add('nl', 'Geen gegevens gevonden')\n\nconst noDataLeftLabel = new TextBundle()\n  .add('en', 'All data removed')\n  .add('nl', 'Alle gegevens verwijderd')\n\nconst noResultsLabel = new TextBundle()\n  .add('en', 'No search results')\n  .add('nl', 'Geen zoek resultaten')\n\nconst editLabel = new TextBundle()\n  .add('en', 'Adjust')\n  .add('nl', 'Aanpassen')\n\nconst undoLabel = new TextBundle()\n  .add('en', 'Undo')\n  .add('nl', 'Herstel')\n\nconst deleteLabel = new TextBundle()\n  .add('en', 'Delete selected')\n  .add('nl', 'Verwijder selectie')\n\nfunction deletedNoneRowLabel (): TextBundle {\n  return new TextBundle()\n    .add('en', 'No adjustments')\n    .add('nl', 'Geen aanpassingen')\n}\n\nfunction deletedRowLabel (amount: number): TextBundle {\n  return new TextBundle()\n    .add('en', `${amount} row deleted`)\n    .add('nl', `${amount} rij verwijderd`)\n}\n\nfunction deletedRowsLabel (amount: number): TextBundle {\n  return new TextBundle()\n    .add('en', `${amount} rows deleted`)\n    .add('nl', `${amount} rijen verwijderd`)\n}\n\nfunction deletedLabel (amount: number): TextBundle {\n  if (amount === 0) return deletedNoneRowLabel()\n  if (amount === 1) return deletedRowLabel(amount)\n  return deletedRowsLabel(amount)\n}\n\nfunction singlePageLabel (): TextBundle {\n  return new TextBundle()\n    .add('en', '1 page')\n    .add('nl', '1 pagina')\n}\n\nfunction multiplePagesLabel (amount: number): TextBundle {\n  return new TextBundle()\n    .add('en', `${amount} pages`)\n    .add('nl', `${amount} pagina's`)\n}\n\nfunction pagesLabel (amount: number): TextBundle {\n  if (amount === 1) return singlePageLabel()\n  return multiplePagesLabel(amount)\n}\n"],"mappings":";;;AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAGA,SAASC,cAAT,EAAyBC,iBAAzB,EAA4CC,eAA5C,QAAmE,UAAnE;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,OAAT,EAAkBC,KAAlB,EAAyBC,MAAzB,QAAuC,QAAvC;AACA,OAAOC,OAAP,MAAoB,uCAApB;AACA,OAAOC,SAAP,MAAsB,yCAAtB;AACA,SAASC,QAAT,QAAyB,aAAzB;;;AA6BA,OAAO,MAAMC,KAAK,GAAG,QAA8F;EAAA;;EAAA,IAA7F;IAAEC,EAAF;IAAMC,IAAN;IAAYC,IAAZ;IAAkBC,QAAQ,GAAG,KAA7B;IAAoCC,QAAQ,GAAG,CAA/C;IAAkDC,MAAlD;IAA0DC;EAA1D,CAA6F;EACjH,MAAMC,iBAAiB,GAAG,CAA1B;EAEA,MAAMC,KAAK,GAAGvB,KAAK,CAACwB,MAAN,CAAuB,EAAvB,CAAd;EACA,MAAMC,WAAW,GAAGzB,KAAK,CAACwB,MAAN,CAAgCP,IAAI,CAACS,IAArC,CAApB;EACA,MAAMC,YAAY,GAAG3B,KAAK,CAACwB,MAAN,CAAgCC,WAAW,CAACG,OAA5C,CAArB;EAEA,MAAMC,YAAmB,GAAG;IAC1BC,IAAI,EAAE,KADoB;IAE1BC,SAAS,EAAEC,YAAY,EAFG;IAG1BC,IAAI,EAAE,CAHoB;IAI1BC,UAAU,EAAEC,gBAAgB,CAAC,CAAD,CAJF;IAK1BT,IAAI,EAAEU,UAAU,CAAC,CAAD,CALU;IAM1BC,QAAQ,EAAE,EANgB;IAO1BC,YAAY,EAAE,CAPY;IAQ1BC,UAAU,EAAE;MACVC,MAAM,EAAEf,WAAW,CAACG,OAAZ,CAAoBa,MAApB,GAA6BtB,QAD3B;MAEVuB,MAAM,EAAE,KAFE;MAGVC,IAAI,EAAE,KAHI;MAIVC,KAAK,EAAEjB,YAAY,CAACC,OAAb,CAAqBa,MAArB,GAA8B,CAJ3B;MAKVI,MAAM,EAAElB,YAAY,CAACC,OAAb,CAAqBa,MAArB,KAAgC,CAL9B;MAMVK,UAAU,EAAE,KANF;MAOVC,SAAS,EAAE;IAPD;EARc,CAA5B;EAmBA,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjD,KAAK,CAACkD,QAAN,CAAsBrB,YAAtB,CAA1B;EAEA,MAAMsB,IAAI,GAAGC,WAAW,CAAChC,MAAD,CAAxB;;EAEA,SAASiC,OAAT,CAAkBC,OAAlB,EAAqD;IACnD,OAAOC,OAAO,CAACD,OAAD,CAAP,GAAmB,EAAnB,GAAwB,QAA/B;EACD;;EAED,SAASC,OAAT,CAAkBD,OAAlB,EAAsD;IACpD,IAAI,OAAON,KAAK,CAACT,UAAN,CAAiBe,OAAjB,CAAP,KAAqC,SAAzC,EAAoD;MAClD,OAAON,KAAK,CAACT,UAAN,CAAiBe,OAAjB,CAAP;IACD;;IACD,OAAO,KAAP;EACD;;EAED,SAASnB,gBAAT,CAA2BqB,WAA3B,EAA0D;IACxD,MAAMC,cAAc,GAAInC,iBAAiB,GAAG,CAArB,GAA0B,CAAjD;IACA,MAAMS,SAAS,GAAGC,YAAY,EAA9B;IAEA,IAAI0B,KAAe,GAAG,EAAtB;;IACA,IAAID,cAAc,IAAI1B,SAAlB,IAA+BA,SAAS,GAAG,CAA/C,EAAkD;MAChD2B,KAAK,GAAG3D,CAAC,CAAC2D,KAAF,CAAQ,CAAR,EAAWC,IAAI,CAACC,GAAL,CAAS7B,SAAT,EAAoB0B,cAApB,CAAX,CAAR;IACD,CAFD,MAEO,IAAIA,cAAc,GAAG1B,SAArB,EAAgC;MACrC,MAAM8B,QAAQ,GAAG9B,SAAS,GAAG,CAA7B;MAEA,IAAI+B,KAAJ;MACA,IAAIC,GAAJ;;MAEA,IAAIP,WAAW,GAAGlC,iBAAlB,EAAqC;QACnC;QACAwC,KAAK,GAAG,CAAR;QACAC,GAAG,GAAGJ,IAAI,CAACC,GAAL,CAAS7B,SAAT,EAAoB0B,cAApB,CAAN;MACD,CAJD,MAIO,IAAII,QAAQ,GAAGL,WAAX,IAA0BlC,iBAA9B,EAAiD;QACtD;QACAwC,KAAK,GAAGD,QAAQ,IAAIJ,cAAc,GAAG,CAArB,CAAhB;QACAM,GAAG,GAAGF,QAAQ,GAAG,CAAjB;MACD,CAJM,MAIA;QACL;QACAC,KAAK,GAAGN,WAAW,GAAGlC,iBAAtB;QACAyC,GAAG,GAAGP,WAAW,GAAGlC,iBAAd,GAAkC,CAAxC;MACD;;MACDoC,KAAK,GAAG3D,CAAC,CAAC2D,KAAF,CAAQI,KAAR,EAAeC,GAAf,CAAR;IACD;;IAED,OAAOL,KAAP;EACD;;EAED,SAAS1B,YAAT,GAAiC;IAC/B,IAAIL,YAAY,CAACC,OAAb,CAAqBa,MAArB,KAAgC,CAApC,EAAuC;MACrC,OAAO,CAAP;IACD;;IAED,OAAOkB,IAAI,CAACK,IAAL,CAAUrC,YAAY,CAACC,OAAb,CAAqBa,MAArB,GAA8BtB,QAAxC,CAAP;EACD;;EAED,SAASiB,UAAT,CAAqBoB,WAArB,EAA6D;IAC3D,MAAMS,MAAM,GAAGT,WAAW,GAAGrC,QAA7B;IACA,OAAOQ,YAAY,CAACC,OAAb,CAAqBsC,KAArB,CAA2BD,MAA3B,EAAmCA,MAAM,GAAG9C,QAA5C,CAAP;EACD;;EAED,SAASgD,aAAT,CAAwBC,KAAxB,EAAoE;IAClE,oBACE;MAAA,WACGpB,KAAK,CAAClB,IAAN,GAAauC,eAAe,EAA5B,GAAiC,EADpC,EAEGD,KAAK,CAACE,KAAN,CAAYC,GAAZ,CAAgB,CAACC,IAAD,EAAOC,KAAP,KAAiBC,cAAc,CAACF,IAAD,EAAOC,KAAP,CAA/C,CAFH;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAMD;;EAED,SAASJ,eAAT,GAAyC;IACvC,MAAMhC,QAAQ,GAAGW,KAAK,CAACX,QAAN,CAAeI,MAAf,GAAwB,CAAxB,IAA6BO,KAAK,CAACX,QAAN,CAAeI,MAAf,KAA0BO,KAAK,CAACtB,IAAN,CAAWe,MAAnF;IACA,oBACE;MAAqB,SAAS,EAAC,WAA/B;MAAA,uBACE,QAAC,QAAD;QAAU,EAAE,EAAC,IAAb;QAAkB,QAAQ,EAAEJ,QAA5B;QAAsC,QAAQ,EAAE,MAAMsC,gBAAgB;MAAtE;QAAA;QAAA;QAAA;MAAA;IADF,GAAQ,YAAR;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASD,cAAT,CAAyBN,KAAzB,EAAwDK,KAAxD,EAAoF;IAClF,oBACE;MAAqB,SAAS,EAAC,qBAA/B;MAAA,uBACE;QAAK,SAAS,EAAC,yCAAf;QAAA,UAA0DL,KAAK,CAACQ;MAAhE;QAAA;QAAA;QAAA;MAAA;IADF,GAAU,GAAEH,KAAM,EAAlB;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASI,UAAT,GAAsC;IACpC,OAAO7B,KAAK,CAACtB,IAAN,CAAW6C,GAAX,CAAe,CAACO,GAAD,EAAML,KAAN,KAAgBM,SAAS,CAACD,GAAD,EAAML,KAAN,CAAxC,CAAP;EACD;;EAED,SAASM,SAAT,CAAoBD,GAApB,EAA0CE,QAA1C,EAAyE;IACvE,oBACE;MAAwB,SAAS,EAAC,gBAAlC;MAAA,WACGhC,KAAK,CAAClB,IAAN,GAAamD,cAAc,CAACH,GAAG,CAAC/D,EAAL,CAA3B,GAAsC,EADzC,EAEG+D,GAAG,CAACR,KAAJ,CAAUC,GAAV,CAAc,CAACC,IAAD,EAAOU,SAAP,KAAqBC,aAAa,CAACX,IAAD,EAAOU,SAAP,CAAhD,CAFH;IAAA,GAAU,GAAEF,QAAS,EAArB;MAAA;MAAA;MAAA;IAAA,QADF;EAMD;;EAED,SAASC,cAAT,CAAyBG,KAAzB,EAAqD;IACnD,MAAM/C,QAAQ,GAAGW,KAAK,CAACX,QAAN,CAAegD,QAAf,CAAwBD,KAAxB,CAAjB;IACA,oBACE;MAA2B,SAAS,EAAC,MAArC;MAAA,uBACE,QAAC,QAAD;QAAU,EAAE,EAAEA,KAAd;QAAqB,QAAQ,EAAE/C,QAA/B;QAAyC,QAAQ,EAAE,MAAMiD,eAAe,CAACF,KAAD;MAAxE;QAAA;QAAA;QAAA;MAAA;IADF,GAAU,SAAQA,KAAM,EAAxB;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASD,aAAT,QAA0DD,SAA1D,EAA0F;IAAA,IAAlE;MAAEN;IAAF,CAAkE;IACxF,MAAM3D,IAAI,GAAGsE,cAAc,CAACX,IAAD,CAAd,GAAuBY,aAAa,CAACZ,IAAD,CAApC,GAA6Ca,aAAa,CAACb,IAAD,CAAvE;IAEA,oBACE;MAAyB,SAAS,EAAC,WAAnC;MAAA,UACG3D;IADH,GAAU,GAAEiE,SAAU,EAAtB;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASO,aAAT,CAAwBb,IAAxB,EAAmD;IACjD,oBAAO;MAAK,SAAS,EAAC,sCAAf;MAAA,UAAuDA;IAAvD;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,SAASY,aAAT,CAAwBE,IAAxB,EAAmD;IACjD,oBACE;MAAK,SAAS,EAAC,kDAAf;MAAA,uBACE;QAAG,IAAI,EAAEA,IAAT;QAAe,MAAM,EAAC,QAAtB;QAA+B,GAAG,EAAC,YAAnC;QAAgD,KAAK,EAAEA,IAAvD;QAAA,UAA8DvC,IAAI,CAACwC;MAAnE;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASJ,cAAT,CAAyBK,KAAzB,EAAiD;IAC/C,IAAIC,GAAJ;;IACA,IAAI;MACFA,GAAG,GAAG,IAAIC,GAAJ,CAAQF,KAAR,CAAN;IACD,CAFD,CAEE,OAAO7F,CAAP,EAAU;MACV,OAAO,KAAP;IACD;;IACD,OAAO8F,GAAG,CAACE,QAAJ,KAAiB,OAAjB,IAA4BF,GAAG,CAACE,QAAJ,KAAiB,QAApD;EACD;;EAED,SAASC,eAAT,GAAyC;IACvC,oBACE;MAAK,SAAS,EAAC,qBAAf;MAAA,UACGhD,KAAK,CAACd,UAAN,CAAiBqC,GAAjB,CAAsBtC,IAAD,IAAUgE,cAAc,CAAChE,IAAD,CAA7C;IADH;MAAA;MAAA;MAAA;IAAA,QADF;EAKD;;EAED,SAASgE,cAAT,CAAyBxB,KAAzB,EAAqD;IACnD,oBAAO,QAAC,QAAD;MAAgC,KAAK,EAAEA,KAAK,GAAG,CAA/C;MAAkD,QAAQ,EAAEzB,KAAK,CAACf,IAAN,KAAewC,KAA3E;MAAkF,OAAO,EAAE,MAAMyB,aAAa,CAACzB,KAAD;IAA9G,GAAgB,QAAOA,KAAM,EAA7B;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,SAAS0B,UAAT,GAA0C;IACxC,IAAI5E,KAAK,CAACK,OAAN,CAAca,MAAd,KAAyB,CAA7B,EAAgC;MAC9B,OAAOhB,WAAW,CAACG,OAAnB;IACD;;IACD,OAAOH,WAAW,CAACG,OAAZ,CAAoBwE,MAApB,CAA4BtB,GAAD,IAASuB,QAAQ,CAACvB,GAAD,EAAMvD,KAAK,CAACK,OAAZ,CAA5C,CAAP;EACD;;EAED,SAASyE,QAAT,CAAmBvB,GAAnB,EAAyCvD,KAAzC,EAAmE;IACjE,MAAM+E,OAAO,GAAGxB,GAAG,CAACR,KAAJ,CAAUC,GAAV,CAAeC,IAAD,IAAUA,IAAI,CAACI,IAA7B,EAAmC2B,IAAnC,CAAwC,GAAxC,CAAhB;IACA,OAAOhF,KAAK,CAACiF,IAAN,CAAYC,IAAD,IAAU,CAACH,OAAO,CAACjB,QAAR,CAAiBoB,IAAjB,CAAtB,MAAkDC,SAAzD;EACD;;EAED,SAAS/B,gBAAT,GAAmC;IACjC,MAAMgC,eAAe,GAAG3D,KAAK,CAACX,QAAN,CAAeI,MAAf,KAA0BO,KAAK,CAACtB,IAAN,CAAWe,MAA7D;;IACA,IAAIkE,eAAJ,EAAqB;MACnB1D,QAAQ,CAAED,KAAD,IAAW;QAClB,OAAO,EAAE,GAAGA,KAAL;UAAYX,QAAQ,EAAE;QAAtB,CAAP;MACD,CAFO,CAAR;IAGD,CAJD,MAIO;MACLuE,eAAe;IAChB;EACF;;EAED,SAAStB,eAAT,CAA0BF,KAA1B,EAA+C;IAC7CnC,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMX,QAAQ,GAAGW,KAAK,CAACX,QAAN,CAAe6B,KAAf,CAAqB,CAArB,CAAjB;MACA,MAAMO,KAAK,GAAGpC,QAAQ,CAACwE,OAAT,CAAiBzB,KAAjB,CAAd;;MACA,IAAIX,KAAK,KAAK,CAAC,CAAf,EAAkB;QAChBpC,QAAQ,CAACyE,IAAT,CAAc1B,KAAd;MACD,CAFD,MAEO;QACL/C,QAAQ,CAAC0E,MAAT,CAAgBtC,KAAhB,EAAuB,CAAvB;MACD;;MACD,OAAO,EAAE,GAAGzB,KAAL;QAAYX;MAAZ,CAAP;IACD,CATO,CAAR;EAUD;;EAED,SAASuE,eAAT,GAAkC;IAChC3D,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMX,QAAQ,GAAGW,KAAK,CAACtB,IAAN,CAAW6C,GAAX,CAAgBO,GAAD,IAASA,GAAG,CAAC/D,EAA5B,CAAjB;MACA,OAAO,EAAE,GAAGiC,KAAL;QAAYX;MAAZ,CAAP;IACD,CAHO,CAAR;EAID;;EAED,SAAS2E,cAAT,GAAiC;IAC/B/D,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMf,IAAI,GAAGe,KAAK,CAACf,IAAN,KAAe,CAAf,GAAmBe,KAAK,CAACjB,SAAN,GAAkB,CAArC,GAAyCiB,KAAK,CAACf,IAAN,GAAa,CAAnE;MACA,MAAMC,UAAU,GAAGC,gBAAgB,CAACF,IAAD,CAAnC;MACA,MAAMP,IAAI,GAAGU,UAAU,CAACH,IAAD,CAAvB;MACA,OAAO,EAAE,GAAGe,KAAL;QAAYf,IAAZ;QAAkBC,UAAlB;QAA8BR;MAA9B,CAAP;IACD,CALO,CAAR;EAMD;;EAED,SAASuF,UAAT,GAA6B;IAC3BhE,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMf,IAAI,GAAGe,KAAK,CAACf,IAAN,KAAee,KAAK,CAACjB,SAAN,GAAkB,CAAjC,GAAqC,CAArC,GAAyCiB,KAAK,CAACf,IAAN,GAAa,CAAnE;MACA,MAAMC,UAAU,GAAGC,gBAAgB,CAACF,IAAD,CAAnC;MACA,MAAMP,IAAI,GAAGU,UAAU,CAACH,IAAD,CAAvB;MACA,OAAO,EAAE,GAAGe,KAAL;QAAYf,IAAZ;QAAkBC,UAAlB;QAA8BR;MAA9B,CAAP;IACD,CALO,CAAR;EAMD;;EAED,SAASwF,oBAAT,GAAuC;IACrC,MAAMC,mBAAmB,GAAGnE,KAAK,CAACX,QAAN,CAAe6B,KAAf,CAAqB,CAArB,CAA5B;IACA,IAAIiD,mBAAmB,CAAC1E,MAApB,KAA+B,CAAnC,EAAsC;IAEtC,MAAM2E,cAAc,GAAG3F,WAAW,CAACG,OAAZ,CAAoBsC,KAApB,CAA0B,CAA1B,CAAvB;;IAEA,KAAK,MAAMkB,KAAX,IAAoB+B,mBAApB,EAAyC;MACvC,MAAM1C,KAAK,GAAG2C,cAAc,CAACC,SAAf,CAA0BvC,GAAD,IAASA,GAAG,CAAC/D,EAAJ,KAAWqE,KAA7C,CAAd;;MACA,IAAIX,KAAK,KAAK,CAAC,CAAf,EAAkB;QAChB2C,cAAc,CAACL,MAAf,CAAsBtC,KAAtB,EAA6B,CAA7B;MACD;IACF;;IAEDhD,WAAW,CAACG,OAAZ,GAAsBwF,cAAtB;IACAzF,YAAY,CAACC,OAAb,GAAuBuE,UAAU,EAAjC;IAEAlD,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMjB,SAAS,GAAGC,YAAY,EAA9B;MACA,MAAMC,IAAI,GAAG0B,IAAI,CAAC2D,GAAL,CAAS,CAAT,EAAY3D,IAAI,CAACC,GAAL,CAAS7B,SAAS,GAAG,CAArB,EAAwBiB,KAAK,CAACf,IAA9B,CAAZ,CAAb;MACA,MAAMC,UAAU,GAAGC,gBAAgB,CAACF,IAAD,CAAnC;MACA,MAAMP,IAAI,GAAGU,UAAU,CAACH,IAAD,CAAvB;MACA,MAAMK,YAAY,GAAGrB,IAAI,CAACS,IAAL,CAAUe,MAAV,GAAmBhB,WAAW,CAACG,OAAZ,CAAoBa,MAA5D;MACA,MAAMF,UAAU,GAAG,EACjB,GAAGS,KAAK,CAACT,UADQ;QAEjBI,IAAI,EAAEL,YAAY,GAAG,CAFJ;QAGjBM,KAAK,EAAEjB,YAAY,CAACC,OAAb,CAAqBa,MAArB,GAA8B,CAHpB;QAIjBI,MAAM,EAAE,KAJS;QAKjBC,UAAU,EAAErB,WAAW,CAACG,OAAZ,CAAoBa,MAApB,KAA+B,CAL1B;QAMjBM,SAAS,EAAEtB,WAAW,CAACG,OAAZ,CAAoBa,MAApB,GAA6B,CAA7B,IAAkCd,YAAY,CAACC,OAAb,CAAqBa,MAArB,KAAgC;MAN5D,CAAnB;MAQA,OAAO,EAAE,GAAGO,KAAL;QAAYf,IAAZ;QAAkBF,SAAlB;QAA6BG,UAA7B;QAAyCR,IAAzC;QAA+CY,YAA/C;QAA6DD,QAAQ,EAAE,EAAvE;QAA2EE;MAA3E,CAAP;IACD,CAfO,CAAR;IAiBAlB,QAAQ,CAACN,EAAD,EAAKU,WAAW,CAACG,OAAjB,CAAR;EACD;;EAED,SAAS2F,UAAT,GAA6B;IAC3B9F,WAAW,CAACG,OAAZ,GAAsBX,IAAI,CAACS,IAA3B;IACAC,YAAY,CAACC,OAAb,GAAuBuE,UAAU,EAAjC;IACAlD,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMjB,SAAS,GAAGC,YAAY,EAA9B;MACA,MAAMC,IAAI,GAAG0B,IAAI,CAACC,GAAL,CAAS7B,SAAT,EAAoBiB,KAAK,CAACf,IAA1B,CAAb;MACA,MAAMC,UAAU,GAAGC,gBAAgB,CAACF,IAAD,CAAnC;MACA,MAAMP,IAAI,GAAGU,UAAU,CAACY,KAAK,CAACf,IAAP,CAAvB;MAEA,MAAMM,UAAU,GAAG,EACjB,GAAGS,KAAK,CAACT,UADQ;QAEjBI,IAAI,EAAE,KAFW;QAGjBC,KAAK,EAAEjB,YAAY,CAACC,OAAb,CAAqBa,MAArB,GAA8B,CAHpB;QAIjBI,MAAM,EAAE,KAJS;QAKjBC,UAAU,EAAE,KALK;QAMjBC,SAAS,EAAEpB,YAAY,CAACC,OAAb,CAAqBa,MAArB,KAAgC;MAN1B,CAAnB;MAQA,OAAO,EAAE,GAAGO,KAAL;QAAYf,IAAZ;QAAkBF,SAAlB;QAA6BG,UAA7B;QAAyCR,IAAzC;QAA+CY,YAAY,EAAE,CAA7D;QAAgED,QAAQ,EAAE,EAA1E;QAA8EE;MAA9E,CAAP;IACD,CAfO,CAAR;IAiBAlB,QAAQ,CAACN,EAAD,EAAKE,IAAI,CAACS,IAAV,CAAR;EACD;;EAED,SAAS8F,YAAT,CAAuBC,QAAvB,EAAiD;IAC/ClG,KAAK,CAACK,OAAN,GAAgB6F,QAAhB;IACA9F,YAAY,CAACC,OAAb,GAAuBuE,UAAU,EAAjC;IACAlD,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMjB,SAAS,GAAGC,YAAY,EAA9B;MACA,MAAMC,IAAI,GAAG0B,IAAI,CAACC,GAAL,CAAS7B,SAAT,EAAoBiB,KAAK,CAACf,IAA1B,CAAb;MACA,MAAMC,UAAU,GAAGC,gBAAgB,CAACF,IAAD,CAAnC;MACA,MAAMP,IAAI,GAAGU,UAAU,CAACY,KAAK,CAACf,IAAP,CAAvB;MACA,MAAMM,UAAU,GAAG,EACjB,GAAGS,KAAK,CAACT,UADQ;QAEjBK,KAAK,EAAEjB,YAAY,CAACC,OAAb,CAAqBa,MAArB,GAA8B,CAFpB;QAGjBI,MAAM,EAAE5B,IAAI,CAACS,IAAL,CAAUe,MAAV,KAAqB,CAHZ;QAIjBK,UAAU,EAAE7B,IAAI,CAACS,IAAL,CAAUe,MAAV,GAAmB,CAAnB,IAAwBhB,WAAW,CAACG,OAAZ,CAAoBa,MAApB,KAA+B,CAJlD;QAKjBM,SAAS,EAAE9B,IAAI,CAACS,IAAL,CAAUe,MAAV,GAAmB,CAAnB,IAAwBhB,WAAW,CAACG,OAAZ,CAAoBa,MAApB,GAA6B,CAArD,IAA0Dd,YAAY,CAACC,OAAb,CAAqBa,MAArB,KAAgC;MALpF,CAAnB;MAOA,OAAO,EAAE,GAAGO,KAAL;QAAYf,IAAZ;QAAkBF,SAAlB;QAA6BG,UAA7B;QAAyCR,IAAzC;QAA+Ca;MAA/C,CAAP;IACD,CAbO,CAAR;EAcD;;EAED,SAAS2D,aAAT,CAAwBjE,IAAxB,EAA4C;IAC1CgB,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMtB,IAAI,GAAGU,UAAU,CAACH,IAAD,CAAvB;MACA,OAAO,EAAE,GAAGe,KAAL;QAAYf,IAAZ;QAAkBP;MAAlB,CAAP;IACD,CAHO,CAAR;EAID;;EAED,SAASgG,gBAAT,GAAmC;IACjCzE,QAAQ,CAAED,KAAD,IAAW;MAClB,MAAMlB,IAAI,GAAG,CAACkB,KAAK,CAAClB,IAApB;MACA,MAAMS,UAAU,GAAG,EACjB,GAAGS,KAAK,CAACT,UADQ;QAEjBG,MAAM,EAAEZ;MAFS,CAAnB;MAIA,OAAO,EAAE,GAAGkB,KAAL;QAAYlB,IAAZ;QAAkBS;MAAlB,CAAP;IACD,CAPO,CAAR;EAQD;;EAED,oBACE;IAAA,wBACE;MAAK,SAAS,EAAC,kCAAf;MAAA,wBACE;QAAK,SAAS,EAAG,yCAAwCtB,IAAI,CAACS,IAAL,CAAUe,MAAV,IAAoBtB,QAApB,GAA+B,QAA/B,GAA0C,EAAG,GAAtG;QAAA,wBACE,QAAC,cAAD;UAAgB,OAAO,EAAE6F;QAAzB;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAA,UACGhB,eAAe;QADlB;UAAA;UAAA;UAAA;QAAA,QAFF,eAKE,QAAC,iBAAD;UAAmB,OAAO,EAAEiB;QAA5B;UAAA;UAAA;UAAA;QAAA,QALF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAQE;QAAK,SAAS,EAAC;MAAf;QAAA;QAAA;QAAA;MAAA,QARF,eASE,QAAC,OAAD;QAAS,IAAI,EAAE9D,IAAI,CAACwE,KAApB;QAA2B,KAAK,EAAC,YAAjC;QAA8C,MAAM,EAAC;MAArD;QAAA;QAAA;QAAA;MAAA,QATF,eAUE;QAAK,SAAS,EAAG,GAAEtE,OAAO,CAAC,QAAD,CAAW,EAArC;QAAA,uBACE,QAAC,SAAD;UAAW,WAAW,EAAEF,IAAI,CAACyE,iBAA7B;UAAgD,QAAQ,EAAGrG,KAAD,IAAWiG,YAAY,CAACjG,KAAD;QAAjF;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAeE;MAAK,SAAS,EAAG,6CAA4C8B,OAAO,CAAC,OAAD,CAAU,EAA9E;MAAA,uBACE;QAAO,SAAS,EAAC,8CAAjB;QAAA,wBACE;UAAA,UACGc,aAAa,CAACnD,IAAD;QADhB;UAAA;UAAA;UAAA;QAAA,QADF,eAIE;UAAO,SAAS,EAAC,uBAAjB;UAAA,UACG6D,UAAU;QADb;UAAA;UAAA;UAAA;QAAA,QAJF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAfF,eAyBE;MAAK,SAAS,EAAG,qEAAoExB,OAAO,CAAC,QAAD,CAAW,EAAvG;MAAA,uBACE,QAAC,MAAD;QAAQ,IAAI,EAAEF,IAAI,CAACN,MAAnB;QAA2B,KAAK,EAAC,YAAjC;QAA8C,MAAM,EAAC;MAArD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAzBF,eA4BE;MAAK,SAAS,EAAG,qEAAoEQ,OAAO,CAAC,YAAD,CAAe,EAA3G;MAAA,uBACE,QAAC,MAAD;QAAQ,IAAI,EAAEF,IAAI,CAACL,UAAnB;QAA+B,KAAK,EAAC,YAArC;QAAkD,MAAM,EAAC;MAAzD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QA5BF,eA+BE;MAAK,SAAS,EAAG,qEAAoEO,OAAO,CAAC,WAAD,CAAc,EAA1G;MAAA,uBACE,QAAC,MAAD;QAAQ,IAAI,EAAEF,IAAI,CAACJ,SAAnB;QAA8B,KAAK,EAAC,YAApC;QAAiD,MAAM,EAAC;MAAxD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QA/BF,eAkCE;MAAK,SAAS,EAAG,6CAA4C9B,IAAI,CAACS,IAAL,CAAUe,MAAV,KAAqB,CAArB,GAAyB,QAAzB,GAAoC,EAAG,GAApG;MAAA,wBACE;QAAK,SAAS,EAAC,kCAAf;QAAA,wBACE,QAAC,QAAD;UAAU,EAAE,EAAC,MAAb;UAAoB,QAAQ,EAAEO,KAAK,CAAClB,IAApC;UAA0C,QAAQ,EAAE4F;QAApD;UAAA;UAAA;UAAA;QAAA,QADF,eAEE,QAAC,KAAD;UAAO,IAAI,EAAEvE,IAAI,CAACrB,IAAlB;UAAwB,MAAM,EAAC;QAA/B;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAKE;QAAK,SAAS,EAAG,GAAEuB,OAAO,CAAC,QAAD,CAAW,SAArC;QAAA,uBACE,QAAC,eAAD;UAAiB,KAAK,EAAEF,IAAI,CAACT,MAA7B;UAAqC,KAAK,EAAC,aAA3C;UAAyD,IAAI,EAAE9B,SAA/D;UAA0E,OAAO,EAAEsG;QAAnF;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QALF,eAQE;QAAK,SAAS,EAAC;MAAf;QAAA;QAAA;QAAA;MAAA,QARF,eASE,QAAC,KAAD;QAAO,IAAI,EAAE/D,IAAI,CAAC0E;MAAlB;QAAA;QAAA;QAAA;MAAA,QATF,eAUE;QAAK,SAAS,EAAG,GAAExE,OAAO,CAAC,MAAD,CAAS,EAAnC;QAAA,uBACE,QAAC,eAAD;UAAiB,KAAK,EAAEF,IAAI,CAACR,IAA7B;UAAmC,KAAK,EAAC,cAAzC;UAAwD,IAAI,EAAEhC,OAA9D;UAAuE,OAAO,EAAE4G;QAAhF;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QAlCF;EAAA,gBADF;;EAoDA,SAASnE,WAAT,CAAsBhC,MAAtB,EAA4C;IAC1C,OAAO;MACLU,IAAI,EAAE5B,UAAU,CAAC4H,SAAX,CAAqBC,SAArB,EAAgC3G,MAAhC,CADD;MAELuB,IAAI,EAAEzC,UAAU,CAAC4H,SAAX,CAAqBE,SAArB,EAAgC5G,MAAhC,CAFD;MAGLyB,MAAM,EAAE3C,UAAU,CAAC4H,SAAX,CAAqBG,WAArB,EAAkC7G,MAAlC,CAHH;MAIL0B,UAAU,EAAE5C,UAAU,CAAC4H,SAAX,CAAqBI,eAArB,EAAsC9G,MAAtC,CAJP;MAKL2B,SAAS,EAAE7C,UAAU,CAAC4H,SAAX,CAAqBK,cAArB,EAAqC/G,MAArC,CALN;MAMLuG,KAAK,EAAEzH,UAAU,CAAC4H,SAAX,CAAqBM,UAAU,CAACpF,KAAK,CAACjB,SAAP,CAA/B,EAAkDX,MAAlD,CANF;MAOLsB,MAAM,EAAExC,UAAU,CAAC4H,SAAX,CAAqBO,WAArB,EAAkCjH,MAAlC,CAPH;MAQLyG,OAAO,EAAE3H,UAAU,CAAC4H,SAAX,CAAqBQ,YAAY,CAACrH,IAAI,CAACS,IAAL,CAAUe,MAAV,GAAmBhB,WAAW,CAACG,OAAZ,CAAoBa,MAAxC,CAAjC,EAAkFrB,MAAlF,CARJ;MASLwG,iBAAiB,EAAE1H,UAAU,CAAC4H,SAAX,CAAqBF,iBAArB,EAAwCxG,MAAxC,CATd;MAULuE,IAAI,EAAEzF,UAAU,CAAC4H,SAAX,CAAqBnC,IAArB,EAA2BvE,MAA3B;IAVD,CAAP;EAYD;AACF,CAjZM;;GAAMN,K;;KAAAA,K;AAgab,MAAM6E,IAAI,GAAG,IAAI1F,UAAJ,GACVsI,GADU,CACN,IADM,EACA,WADA,EAEVA,GAFU,CAEN,IAFM,EAEA,QAFA,CAAb;AAIA,MAAMX,iBAAiB,GAAG,IAAI3H,UAAJ,GACvBsI,GADuB,CACnB,IADmB,EACb,QADa,EAEvBA,GAFuB,CAEnB,IAFmB,EAEb,QAFa,CAA1B;AAIA,MAAMN,WAAW,GAAG,IAAIhI,UAAJ,GACjBsI,GADiB,CACb,IADa,EACP,eADO,EAEjBA,GAFiB,CAEb,IAFa,EAEP,wBAFO,CAApB;AAIA,MAAML,eAAe,GAAG,IAAIjI,UAAJ,GACrBsI,GADqB,CACjB,IADiB,EACX,kBADW,EAErBA,GAFqB,CAEjB,IAFiB,EAEX,0BAFW,CAAxB;AAIA,MAAMJ,cAAc,GAAG,IAAIlI,UAAJ,GACpBsI,GADoB,CAChB,IADgB,EACV,mBADU,EAEpBA,GAFoB,CAEhB,IAFgB,EAEV,sBAFU,CAAvB;AAIA,MAAMR,SAAS,GAAG,IAAI9H,UAAJ,GACfsI,GADe,CACX,IADW,EACL,QADK,EAEfA,GAFe,CAEX,IAFW,EAEL,WAFK,CAAlB;AAIA,MAAMP,SAAS,GAAG,IAAI/H,UAAJ,GACfsI,GADe,CACX,IADW,EACL,MADK,EAEfA,GAFe,CAEX,IAFW,EAEL,SAFK,CAAlB;AAIA,MAAMF,WAAW,GAAG,IAAIpI,UAAJ,GACjBsI,GADiB,CACb,IADa,EACP,iBADO,EAEjBA,GAFiB,CAEb,IAFa,EAEP,oBAFO,CAApB;;AAIA,SAASC,mBAAT,GAA4C;EAC1C,OAAO,IAAIvI,UAAJ,GACJsI,GADI,CACA,IADA,EACM,gBADN,EAEJA,GAFI,CAEA,IAFA,EAEM,mBAFN,CAAP;AAGD;;AAED,SAASE,eAAT,CAA0BC,MAA1B,EAAsD;EACpD,OAAO,IAAIzI,UAAJ,GACJsI,GADI,CACA,IADA,EACO,GAAEG,MAAO,cADhB,EAEJH,GAFI,CAEA,IAFA,EAEO,GAAEG,MAAO,iBAFhB,CAAP;AAGD;;AAED,SAASC,gBAAT,CAA2BD,MAA3B,EAAuD;EACrD,OAAO,IAAIzI,UAAJ,GACJsI,GADI,CACA,IADA,EACO,GAAEG,MAAO,eADhB,EAEJH,GAFI,CAEA,IAFA,EAEO,GAAEG,MAAO,mBAFhB,CAAP;AAGD;;AAED,SAASJ,YAAT,CAAuBI,MAAvB,EAAmD;EACjD,IAAIA,MAAM,KAAK,CAAf,EAAkB,OAAOF,mBAAmB,EAA1B;EAClB,IAAIE,MAAM,KAAK,CAAf,EAAkB,OAAOD,eAAe,CAACC,MAAD,CAAtB;EAClB,OAAOC,gBAAgB,CAACD,MAAD,CAAvB;AACD;;AAED,SAASE,eAAT,GAAwC;EACtC,OAAO,IAAI3I,UAAJ,GACJsI,GADI,CACA,IADA,EACM,QADN,EAEJA,GAFI,CAEA,IAFA,EAEM,UAFN,CAAP;AAGD;;AAED,SAASM,kBAAT,CAA6BH,MAA7B,EAAyD;EACvD,OAAO,IAAIzI,UAAJ,GACJsI,GADI,CACA,IADA,EACO,GAAEG,MAAO,QADhB,EAEJH,GAFI,CAEA,IAFA,EAEO,GAAEG,MAAO,WAFhB,CAAP;AAGD;;AAED,SAASN,UAAT,CAAqBM,MAArB,EAAiD;EAC/C,IAAIA,MAAM,KAAK,CAAf,EAAkB,OAAOE,eAAe,EAAtB;EAClB,OAAOC,kBAAkB,CAACH,MAAD,CAAzB;AACD"},"metadata":{},"sourceType":"module"}